<!DOCTYPE html><html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Malla Interactiva – Ingeniería Electrónica</title>
  <style>
    :root {
      --gris-claro: #e5e7eb;
      --rosa-claro: #ffe4ec;
      --rosa-medio: #fbb6ce;
      --rosa-oscuro: #f472b6;
      --texto: #4a4a4a;
      --borde: #f8c4d9;
    }
    * { box-sizing: border-box; }body {
  margin: 0;
  font-family: "Inter", system-ui, sans-serif;
  background: var(--rosa-claro);
  color: var(--texto);
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 2rem 1rem 4rem;
}

h1 {
  margin: 0 0 2rem;
  font-size: 2rem;
  font-weight: 700;
  color: var(--rosa-oscuro);
  text-align: center;
}

#semestres {
  display: flex;
  flex-wrap: wrap;
  gap: 1.2rem;
  justify-content: center;
  width: 100%;
  max-width: 1200px;
}

.semestre {
  background: #fff;
  border: 2px dashed var(--borde);
  border-radius: 12px;
  padding: 1rem;
  width: 300px;
  display: flex;
  flex-direction: column;
  gap: 0.6rem;
  box-shadow: 0 4px 10px rgba(0,0,0,0.04);
}

.semestre h2 {
  margin: 0 0 0.4rem;
  font-size: 1.2rem;
  font-weight: 600;
  color: var(--rosa-oscuro);
  text-align: center;
}

.ramo {
  background: var(--gris-claro);
  color: #4b5563;
  border: none;
  padding: 0.4rem 0.6rem;
  border-radius: 8px;
  font-size: 0.9rem;
  cursor: pointer;
  transition: background 0.2s ease;
}

.ramo.habilitado {
  background: linear-gradient(90deg, var(--rosa-medio), var(--rosa-oscuro));
  color: #fff;
}

.ramo:hover { filter: brightness(1.05); }

.ramo.aprobado {
  background: #a7f3d0;
  color: #055f35;
  text-decoration: line-through;
}

#reset {
  margin-top: 2rem;
  padding: 0.6rem 1.4rem;
  font-size: 1rem;
  background: var(--rosa-oscuro);
  color: #fff;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  box-shadow: 0 3px 6px rgba(0,0,0,0.12);
  transition: opacity 0.25s;
}

#reset:hover { opacity: 0.85; }

  </style>
</head>
<body>
  <h1>Ingeniería Electrónica – Malla Interactiva</h1>
  <div id="semestres"></div>
  <button id="reset">Reiniciar selección</button>  <script>
    const materias = [/* ... mismo array de materias ... */];

    const contenedor = document.getElementById("semestres");

    const niveles = {};
    materias.forEach(m => {
      if (!niveles[m.nivel]) niveles[m.nivel] = [];
      niveles[m.nivel].push(m);
    });

    const botonesMap = {};
    const aprobadas = new Set(JSON.parse(localStorage.getItem("aprobadas") || "[]"));

    Object.entries(niveles).forEach(([nivel, ramos]) => {
      const tarjeta = document.createElement("div");
      tarjeta.className = "semestre";

      const h2 = document.createElement("h2");
      h2.textContent = `Nivel ${nivel}`;
      tarjeta.appendChild(h2);

      ramos.forEach(ramo => {
        const btn = document.createElement("button");
        btn.className = "ramo";
        btn.textContent = ramo.nombre;
        btn.dataset.id = ramo.id;
        tarjeta.appendChild(btn);
        botonesMap[ramo.id] = btn;

        if (aprobadas.has(ramo.id)) btn.classList.add("aprobado");
      });

      contenedor.appendChild(tarjeta);
    });

    function actualizarHabilitados() {
      materias.forEach(m => {
        const btn = botonesMap[m.id];
        if (m.correlativas.every(id => botonesMap[id].classList.contains("aprobado"))) {
          btn.classList.add("habilitado");
        } else {
          btn.classList.remove("habilitado");
        }
      });
      localStorage.setItem("aprobadas", JSON.stringify(
        Object.entries(botonesMap)
          .filter(([id, el]) => el.classList.contains("aprobado"))
          .map(([id]) => parseInt(id))
      ));
    }

    Object.values(botonesMap).forEach(btn => {
      btn.addEventListener("click", () => {
        btn.classList.toggle("aprobado");
        actualizarHabilitados();
      });
    });

    document.getElementById("reset").addEventListener("click", () => {
      Object.values(botonesMap).forEach(b => {
        b.classList.remove("aprobado", "habilitado");
        b.title = "";
      });
      localStorage.removeItem("aprobadas");
      actualizarHabilitados();
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

    actualizarHabilitados();
  </script></body>
</html>
